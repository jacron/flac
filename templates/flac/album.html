{% extends "flac/base.html" %}
{% load static %}
{% load page_tags %}
{% block title %}
    {{ album.Title }}
{% endblock %}
{% block page %}
    <div class="album">
        <form>{% csrf_token %}</form>
        <div class="album-controls">
            <span class="hyperlink btn">
                <a onclick="openfinder('{{ album.ID }}')">open finder</a>
            </span>
            <input class="tag typeahead" type="text" placeholder="Tag">
            <input class="componist typeahead" type="text" placeholder="Componist">
            <input class="performer typeahead" type="text" placeholder="Artiest">
            <input class="instrument typeahead" type="text" placeholder="Solo instrument">
        </div>
        <img src="/albumimage/{{ album.ID }}/"
             class="album-image">
        <img src="/albumimage/{{ album.ID }}/back/"
             class="album-image">
        <h4 contenteditable="true" class="edit-title" albumid="{{ album.ID }}">
            {{ album.Title }}
        </h4>
        {% for tag in album_tags %}
            <i class="tag hyperlink"><a href="/tag/{{ tag.ID }}">{{ tag.Name }}</a>
                <div class="fa fa-times-circle remove" id="{{ tag.ID }}" albumid="{{ album.ID }}"></div>
            </i>,
        {% endfor %}
        {% if album.AlbumID %}
            <div class="hyperlink">
                <span>Collectie: </span>
                <a href="/album/{{ album.AlbumID }}">{{ mother_title }}</a>
            </div>
        {% endif %}
        {% for componist in album_componisten %}
            <div class="hyperlink componist">
                <a href="{% url 'componist' componist.ID %}">{{ componist.FullName }}</a>
                <div class="fa fa-times-circle remove" id="{{ componist.ID }}" albumid="{{ album.ID }}"></div>
            </div>
        {% endfor %}
        {% for performer in album_performers %}
            <div class="hyperlink performer">
                <a href="/performer/{{ performer.ID }}/">{{ performer.FullName }}</a>
                <div class="fa fa-times-circle remove" id="{{ performer.ID }}" albumid="{{ album.ID }}"></div>
            </div>
        {% endfor %}
        {% if album_instrument %}
            <div class="hyperlink instrument">
                <a href="/instrument/{{ album_instrument.ID }}/">{{ album_instrument.Name }}</a>
                <div class="fa fa-times-circle remove" id="{{ instrument.ID }}" albumid="{{ album.ID }}"></div>
            </div>
        {% endif %}
        <div class="clear"></div>
        {% for cuesheet in cuesheet_output %}
            <div>
                <div class="hyperlink cuesheet">
                    <a onclick="play({{ cuesheet.ID }})">{{ cuesheet.Filename }}</a>
                    <i class="toggle-cue fa fa-caret-right"></i>
                </div>
                <ul class="content cue">
                    {% for line in cuesheet.cuesheet %}
                        <li
                        {% if forloop.counter0 %}
                            class="content cue-lines"
                        {% endif %}
                        {% if not forloop.counter0 %}
                            class="cue-header"
                        {% endif %}
                        ><span>{{ line }}</span>
                        {% if not forloop.counter0 %}
                            <span class="cue-plus">+</span>
                            <i class="toggle-cue-lines fa fa-caret-right"></i>
                        {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
        <div class="clear"></div>
        {% albumlist albums %}
        <div class="clear"></div>
        <div>
            <div class="pieces">Stukken <i class="toggle-content fa fa-caret-right"></i></div>
            <table class="content stukken">
                {% for item in items %}
                    <tr>
                        <td class="hyperlink">
                            <a onclick="play({{ item.1 }})">{{ item.0 }}</a>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}