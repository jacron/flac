{% extends "flac/base.html" %}
{% load static %}
{% load page_tags %}
{% block title %}
    {{ album.Title }}
{% endblock %}
{% block page %}
    <div class="album">
        <form>{% csrf_token %}</form>
        <div class="hyperlink">
            <a onclick="openfinder('{{ album.ID }}')">open finder</a>
        </div>
        <img src="/albumimage/{{ album.ID }}/"
             class="album-image">
        <img src="/albumimage/{{ album.ID }}/back/"
             class="album-image">
        <h2 contenteditable="true" name="title" class="edit-title" albumid="{{ album.ID }}">
            {{ album.Title }}
        </h2>
        {% for tag in album_tags %}
            <i class="tag hyperlink"><a href="/tag/{{ tag.ID }}">{{ tag.Name }}</a>
                <div class="fa fa-times-circle remove" id="{{ tag.ID }}" albumid="{{ album.ID }}"></div>
            </i>,
        {% endfor %}
        {% if album.AlbumID %}
            <h3 class="hyperlink">
                <span>Collectie: </span>
                <a href="/album/{{ album.AlbumID }}">{{ mother_title }}</a>
            </h3>
        {% endif %}
        {% for componist in album_componisten %}
            <h2 class="hyperlink componist">
                <a href="/componist/{{ componist.ID }}/">{{ componist.FullName }}</a>
                <div class="fa fa-times-circle remove" id="{{ componist.ID }}" albumid="{{ album.ID }}"></div>
            </h2>
        {% endfor %}
        {% for performer in album_performers %}
            <h3 class="hyperlink performer">
                <a href="/performer/{{ performer.ID }}/">{{ performer.FullName }}</a>
                <div class="fa fa-times-circle remove" id="{{ performer.ID }}" albumid="{{ album.ID }}"></div>
            </h3>
        {% endfor %}
        {% if album_instrument %}
            <h4 class="hyperlink instrument">
                <a href="/instrument/{{ album_instrument.ID }}/">{{ album_instrument.Name }}</a>
                <div class="fa fa-times-circle remove" id="{{ instrument.ID }}" albumid="{{ album.ID }}"></div>
            </h4>
        {% endif %}
        {% for cuesheet in cuesheet_output %}
            <div>
                <div class="hyperlink cuesheet">
                    <a onclick="play({{ cuesheet.ID }})">{{ cuesheet.Title }}</a>
                    <i class="toggle-cue fa fa-caret-right"></i></div>
                <ul class="content cue">
                    {% for line in cuesheet.cuesheet %}
                        <li>{{ line }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
        {% albumlist albums %}
        <div class="clear"></div>
        <h4>Stukken <i class="toggle-content fa fa-caret-right"></i></h4>
        <table class="content stukken">
            {% for item in items %}
                <tr>
                    <td class="hyperlink">
                        <a onclick="play({{ item.1 }})">{{ item.0 }}</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
        <h4>Bewerk <i class="toggle-edit fa fa-caret-down"></i></h4>
        <div class="content edit">
            <fieldset>
                <legend>Componist</legend>
            {% editalbum 'select-componist' 'add-componist' album.ID componisten %}
            </fieldset>
            <fieldset>
                <legend>Artiest</legend>
            {% editalbum 'select-performer' 'add-performer' album.ID performers %}
            </fieldset>
            <fieldset>
                <legend>Instrument</legend>
            {% editalbum 'select-instrument' 'add-instrument' album.ID instrumenten %}
            </fieldset>
            <fieldset>
                <legend>Tags</legend>
                {% editalbum 'select-tag' 'add-tag' album.ID tags %}
            </fieldset>
        </div>
    </div>
{% endblock %}